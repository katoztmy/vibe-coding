# ムカログ 計画書 - ネガティブ感情変換アプリ

## 1. プロジェクト概要

「ムカログ」は、日常のちょっとしたムカつきを皮肉や川柳に変換し、笑いやスッキリ感に昇華する Web アプリケーションです。本プロジェクトでは、以下の目標を達成することを目指します：

- ネガティブな感情を笑いに変換する機能の実装
- ユーザーの感情記録と可視化による自己理解の促進
- モバイルファーストのレスポンシブ UI の構築
- スケーラブルなバックエンド設計

主な機能として、ユーザーのムカつきを AI が「大喜利風一言」や「川柳」に変換し、結果を SNS でシェアできる機能を提供します。また、過去の投稿履歴を閲覧できる機能も実装します。

## 2. 開発フェーズ

### フェーズ 1: 環境構築・基本設計（2 週間）

| タスク                 | 説明                                                | 担当               | 予定時間 | 依存関係             |
| ---------------------- | --------------------------------------------------- | ------------------ | -------- | -------------------- |
| プロジェクト初期化     | Next.js プロジェクトのセットアップ、TypeScript 設定 | フロントエンド担当 | 4 時間   | なし                 |
| 認証システム構築       | Supabase Auth の設定、認証 UI 実装                  | フロントエンド担当 | 8 時間   | プロジェクト初期化後 |
| データベース設計       | Supabase テーブル設計、RLS 設定                     | バックエンド担当   | 8 時間   | なし                 |
| API エンドポイント設計 | RESTful API 設計、ルーティング計画                  | バックエンド担当   | 6 時間   | データベース設計後   |
| UI コンポーネント設計  | 共通コンポーネント、スタイルガイド作成              | デザイナー         | 12 時間  | なし                 |
| OpenAI API 連携テスト  | API キー設定、基本的なプロンプト検証                | バックエンド担当   | 6 時間   | なし                 |

### フェーズ 2: コア機能実装（3 週間）

| タスク                    | 説明                          | 担当               | 予定時間 | 依存関係                 |
| ------------------------- | ----------------------------- | ------------------ | -------- | ------------------------ |
| ログイン/新規登録画面実装 | 認証 UI、バリデーション       | フロントエンド担当 | 10 時間  | 認証システム構築後       |
| ホーム画面実装            | 投稿フォーム、スタイル選択 UI | フロントエンド担当 | 12 時間  | UI コンポーネント設計後  |
| 投稿 API 実装             | 投稿作成、AI プロンプト設計   | バックエンド担当   | 16 時間  | API エンドポイント設計後 |
| 変換結果画面実装          | 結果表示、リアクション機能    | フロントエンド担当 | 12 時間  | ホーム画面実装後         |
| 履歴一覧画面実装          | 投稿履歴、日付別グループ化    | フロントエンド担当 | 10 時間  | 変換結果画面実装後       |
| SNS シェア機能実装        | X、LINE シェア機能            | フロントエンド担当 | 8 時間   | 変換結果画面実装後       |

### フェーズ 3: テスト・最適化（2 週間）

| タスク                 | 説明                           | 担当               | 予定時間 | 依存関係       |
| ---------------------- | ------------------------------ | ------------------ | -------- | -------------- |
| ユニットテスト作成     | コンポーネント、API テスト     | 開発チーム         | 20 時間  | コア機能実装後 |
| E2E テスト作成         | Cypress によるフロー検証       | QA 担当            | 16 時間  | コア機能実装後 |
| パフォーマンス最適化   | 画像最適化、バンドルサイズ削減 | フロントエンド担当 | 8 時間   | コア機能実装後 |
| エラーハンドリング強化 | エラー表示、リカバリー機能     | 開発チーム         | 10 時間  | コア機能実装後 |
| セキュリティチェック   | 脆弱性検査、API キー管理確認   | バックエンド担当   | 6 時間   | コア機能実装後 |

### フェーズ 4: デプロイ・リリース準備（1 週間）

| タスク         | 説明                      | 担当             | 予定時間 | 依存関係       |
| -------------- | ------------------------- | ---------------- | -------- | -------------- |
| 本番環境構築   | Vercel プロジェクト設定   | インフラ担当     | 4 時間   | テスト完了後   |
| 環境変数設定   | 本番用 API キー、設定管理 | インフラ担当     | 2 時間   | 本番環境構築後 |
| CI/CD 設定     | GitHub Actions 連携       | インフラ担当     | 6 時間   | 本番環境構築後 |
| UAT 実施       | ユーザー受け入れテスト    | QA 担当          | 16 時間  | 本番環境構築後 |
| マニュアル作成 | 利用ガイド、FAQ 作成      | ドキュメント担当 | 8 時間   | UAT 実施後     |

### Vercel デプロイ手順

以下は、Vercel を使用してアプリケーションをデプロイする具体的な手順です：

#### 1. 準備

- **Vercel アカウントの準備**

  - Vercel のウェブサイト（https://vercel.com）にアクセス
  - アカウント登録またはログイン（GitHub アカウントでの連携を推奨）
  - 組織を作成（必要に応じて）

- **GitHub リポジトリの準備**
  - コードが GitHub リポジトリにプッシュされていることを確認
  - `package.json`やビルド設定が正しく構成されていることを確認

#### 2. プロジェクトのインポート

- **Vercel ダッシュボードから**

  - 「New Project」ボタンをクリック
  - GitHub アカウントを連携している場合、リポジトリ一覧が表示されます
  - 「ムカログ」のリポジトリを選択

- **CLI から（オプション）**

  ```bash
  # Vercel CLIをインストール
  npm i -g vercel

  # ログイン
  vercel login

  # プロジェクトルートディレクトリで実行
  cd /path/to/mukaro-app
  vercel
  ```

#### 3. デプロイ設定

- **フレームワークプリセット**

  - フレームワークとして「Next.js」を選択（自動検出される場合が多い）

- **プロジェクト名の設定**

  - デフォルト名またはカスタム名を入力（例：mukaro-app）

- **ルートディレクトリの設定**

  - モノレポの場合は適切なパスを設定、それ以外はデフォルト（`/`）のまま

- **ビルド設定**
  - ビルドコマンド：デフォルト（`next build`）を使用
  - 出力ディレクトリ：デフォルト（`.next`）を使用
  - インストールコマンド：デフォルト（`npm install`）または必要に応じてカスタマイズ

#### 4. 環境変数の設定（重要）

以下の環境変数を設定します：

| 環境変数名                      | 説明                        | 入手先                                   |
| ------------------------------- | --------------------------- | ---------------------------------------- |
| `NEXT_PUBLIC_SUPABASE_URL`      | Supabase プロジェクトの URL | Supabase ダッシュボード > Settings > API |
| `NEXT_PUBLIC_SUPABASE_ANON_KEY` | Supabase 匿名キー           | Supabase ダッシュボード > Settings > API |
| `SUPABASE_SERVICE_ROLE_KEY`     | Supabase サービスロールキー | Supabase ダッシュボード > Settings > API |
| `OPENAI_API_KEY`                | OpenAI API キー             | OpenAI ダッシュボード > API Keys         |

**注意**: サービスロールキーは管理者権限を持つため、API ルートでのみ使用し、クライアントサイドで公開されないようにする必要があります。

#### 5. デプロイの実行

- 「Deploy」ボタンをクリック
- ビルドログを確認し、エラーがないか監視
- デプロイ完了後、生成された URL にアクセスして動作確認

#### 6. デプロイ後の確認と設定

- **ドメイン設定**

  - カスタムドメインを設定する場合は「Settings > Domains」から設定
  - 自動生成された URL を使用する場合は、そのままで OK

- **デプロイの確認**

  - 各ページが正しく表示されるか確認
  - 認証機能が動作するか確認
  - API エンドポイントが機能するか確認
  - OpenAI API の接続が正常か確認

- **継続的デプロイの設定**
  - デフォルトでは、GitHub リポジトリへのプッシュ時に自動デプロイされる
  - 必要に応じて「Settings > Git」から設定を変更

#### 7. トラブルシューティング

- **ビルドエラーの場合**

  - ビルドログを確認して具体的なエラーを特定
  - ローカル環境でも同じエラーが発生するか確認
  - 必要に応じて設定やコードを修正してから再デプロイ

- **ランタイムエラーの場合**

  - Vercel ダッシュボードの「Logs」でサーバーサイドのエラーを確認
  - ブラウザのコンソールでクライアントサイドのエラーを確認
  - 環境変数が正しく設定されているか再確認

- **環境変数の問題**
  - 「Settings > Environment Variables」で設定を確認
  - 環境変数が本番環境に適用されているか確認（必要に応じて再デプロイ）

## 3. テスト戦略

### 単体テスト

- **対象**: コンポーネント、API エンドポイント、ユーティリティ関数
- **ツール**: Jest、React Testing Library
- **カバレッジ目標**: コア機能は 80%以上

### 統合テスト

- **対象**: 複数コンポーネント間の連携、API-DB 連携
- **ツール**: Jest、Supertest
- **検証内容**: データフロー、状態管理、エラーハンドリング

### E2E テスト

- **対象**: ユーザーフロー全体（登録〜投稿〜履歴閲覧）
- **ツール**: Cypress
- **シナリオ**: 主要ユースケースを網羅

### パフォーマンステスト

- **対象**: ページ読み込み速度、API 応答時間
- **ツール**: Lighthouse、Vercel Analytics
- **目標値**:
  - First Contentful Paint: 1.5 秒以内
  - Time to Interactive: 3 秒以内
  - API 応答時間: 500ms 以内

## 4. リリース計画

### ベータ版リリース（開発完了後 1 週間）

- **対象**: 社内ユーザー、テストユーザー 30 名程度
- **範囲**: コア機能全て（投稿、変換、履歴閲覧）
- **目的**: UI フィードバック収集、バグ発見

### 初回リリース（ベータテスト後 2 週間）

- **対象**: 一般ユーザー
- **範囲**: Must 機能のみ（Nice to Have 機能は除外）
- **マーケティング**: X（旧 Twitter）での告知、関連コミュニティへの投稿

### 機能追加リリース（初回リリース後 1 ヶ月）

- **追加機能**:
  - 投稿カテゴリ分類
  - 統計情報表示
  - シェア統計連携

## 5. リスクと対策

| リスク                 | 影響度 | 発生確率 | 対策                                                                     |
| ---------------------- | ------ | -------- | ------------------------------------------------------------------------ |
| OpenAI API の応答遅延  | 高     | 中       | タイムアウト設定、リトライロジック実装、ユーザーへの適切なフィードバック |
| AI の不適切な変換結果  | 高     | 低       | コンテンツフィルター実装、プロンプト最適化、不適切な結果の報告機能       |
| データベース容量の急増 | 中     | 低       | 定期的なクリーンアップ、古いデータのアーカイブ機能、使用量監視           |
| ユーザー認証トラブル   | 高     | 低       | 代替認証手段の提供、パスワードリセットフロー強化、エラーログ監視         |
| SNS API 仕様変更       | 中     | 中       | 依存関係の最小化、共有機能の抽象化、API 変更通知の購読                   |

## 6. 開発環境と必要なツール

### 開発環境

- **コードエディタ**: VS Code
- **バージョン管理**: Git、GitHub
- **ローカル開発**: Node.js v18 以上
- **コンテナ化**: Docker（オプション）

### ツール・サービス

- **フロントエンド**: Next.js 14、React 18、Tailwind CSS 3
- **バックエンド**: Next.js API Routes、OpenAI API
- **データベース**: Supabase（PostgreSQL）
- **認証**: Supabase Auth
- **デプロイ**: Vercel
- **CI/CD**: GitHub Actions
- **モニタリング**: Vercel Analytics、Sentry
- **コード品質**: ESLint、Prettier、TypeScript

### API・サービス連携

- **AI 変換**: OpenAI API
- **SNS シェア**: X API、LINE 共有 API
- **分析**: Vercel Analytics

## 7. チーム構成と役割

### コアチーム

- **プロジェクトマネージャー**: 全体進行管理、リスク管理
- **フロントエンド開発者**: UI 実装、状態管理、レスポンシブ対応
- **バックエンド開発者**: API 実装、データベース設計、OpenAI 連携
- **デザイナー**: UI/UX デザイン、プロトタイプ作成
- **QA エンジニア**: テスト計画、テスト実施、品質保証

### 拡張チーム

- **インフラエンジニア**: 本番環境構築、CI/CD 設定
- **セキュリティ専門家**: セキュリティレビュー（必要に応じて）
- **コンテンツ担当**: 利用ガイド、マニュアル作成

### コミュニケーション

- **定例ミーティング**: 週 2 回のスプリントレビュー
- **コミュニケーションツール**: Slack、Notion
- **タスク管理**: GitHub Issues、プロジェクトボード

## 8. まとめ

「ムカログ」プロジェクトは、ネガティブな感情を前向きに変換するという独自の価値提案を持つ Web アプリケーションです。本計画書に基づき、約 2 ヶ月の開発期間で、ユーザーがストレスを軽減できる高品質なサービスを構築します。

開発にあたっては、モバイルファースト設計、最新技術スタックの活用、段階的な機能実装を心がけ、ユーザーのフィードバックを取り入れながら改善を続けていきます。リスクに対しては事前対策を講じ、品質を担保しつつ、柔軟に対応していきます。

本プロジェクトの成功指標として、ユーザー継続率、投稿数、シェア数、スッキリ度の高さを重視し、定期的に測定・評価していきます。

Generated by Cursor
